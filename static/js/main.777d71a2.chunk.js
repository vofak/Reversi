(this.webpackJsonpreversi=this.webpackJsonpreversi||[]).push([[0],[,,,,,,,,,function(e,t,r){e.exports=r(22)},,,,,function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),i=r(8),o=r.n(i),s=(r(14),r(15),r(1)),l=r(2),u=r(4),c=r(3),v=r(6),h=r(5),f=(r(16),r(17),function(e){function t(e,r){return Object(s.a)(this,t),Object(u.a)(this,Object(c.a)(t).call(this,e,r))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return n.a.createElement("p",null,"newGame")}}]),t}(n.a.Component)),m=(r(18),r(19),r(20),function(e){function t(e,r){return Object(s.a)(this,t),Object(u.a)(this,Object(c.a)(t).call(this,e,r))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=1/this.props.ratio*100;return n.a.createElement("div",{className:"AspectRatioContainer",style:{paddingBottom:e.toString()+"%"}},n.a.createElement("div",{className:"AspectRatioInner"},this.props.children))}}]),t}(n.a.Component)),y=Object.freeze({empty:1,white:2,black:3}),b=function(e){function t(e,r){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(c.a)(t).call(this,e,r))).onClick=function(){a.props.onClick(Object(v.a)(a))},a.onMouseEnter=function(){a.props.onMouseEnter(Object(v.a)(a))},a.onMouseLeave=function(){a.props.onMouseLeave(Object(v.a)(a))},a.state={piece:a.props.piece,move:a.props.move,toReverse:!1},a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"setPiece",value:function(e){this.setState({piece:e})}},{key:"setMove",value:function(e){this.setState({move:e})}},{key:"setToReverse",value:function(e){this.setState({toReverse:e})}},{key:"render",value:function(){var e;e=this.state.piece===y.white?this.getPiece("white"):this.state.piece===y.black?this.getPiece("black"):"";var t=this.state.move?"blue":this.props.color;return t=this.state.toReverse?"aqua":t,n.a.createElement("div",{className:"SquareContainer"},n.a.createElement(m,{ratio:1,children:n.a.createElement("div",{className:"Square",style:{backgroundColor:t},onClick:this.onClick,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},e)}))}},{key:"getPiece",value:function(e){return n.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"Piece"},n.a.createElement("circle",{r:"50%",cx:"50%",cy:"50%",fill:e}))}}]),t}(n.a.Component),p=Object.freeze({white:{piece:y.white},black:{piece:y.black}});var d=function(e){return e===p.white?p.black:p.white},g=function(){function e(){Object(s.a)(this,e),this.grid=[];for(var t=0;t<8;t++){for(var r=[],a=0;a<8;a++)r.push(y.empty);this.grid.push(r)}this.validMoves=null,this.currPlayer=p.white,this.moveNumber=1,this.winner=null}return Object(l.a)(e,[{key:"get",value:function(e,t){return this.grid[e][t]}},{key:"set",value:function(e,t){this.grid[e.rowIndex][e.columnIndex]=t,this.validMoves=null}},{key:"getMoveNumber",value:function(){return this.moveNumber}},{key:"makeMove",value:function(e){if(!this.isValidMove(e.rowIndex,e.columnIndex))throw new Error("The intended move is invalid");this.set(e,this.currPlayer.piece);var t=!0,r=!1,a=void 0;try{for(var n,i=e.toReverse[Symbol.iterator]();!(t=(n=i.next()).done);t=!0){var o=n.value;this.set(o,this.currPlayer.piece)}}catch(s){r=!0,a=s}finally{try{t||null==i.return||i.return()}finally{if(r)throw a}}this.currPlayer=d(this.currPlayer),this.getValidMoves().length>0?this.moveNumber++:this.winner=this.findWinner()}},{key:"findWinner",value:function(){for(var e=this.currPlayer,t=d(e),r=0,a=0,n=0;n<8;n++)for(var i=0;i<8;i++){var o=this.get(n,i);o===e.piece?r++:o===t.piece&&a++}return r>a?e:t}},{key:"undoMove",value:function(e){this.set(e,y.empty);var t=!0,r=!1,a=void 0;try{for(var n,i=e.toReverse[Symbol.iterator]();!(t=(n=i.next()).done);t=!0){var o=n.value;this.set(o,this.currPlayer.piece)}}catch(s){r=!0,a=s}finally{try{t||null==i.return||i.return()}finally{if(r)throw a}}this.currPlayer=d(this.currPlayer),this.winner=null,this.moveNumber--}},{key:"getValidMoves",value:function(){if(null===this.validMoves){if(!this.currPlayer)return[];for(var e=[],t=0;t<8;++t)for(var r=0;r<8;++r)if(this.grid[t][r]===y.empty){var a=this.getToReverse(this.currPlayer,t,r);a.length>0&&e.push({rowIndex:t,columnIndex:r,toReverse:a})}this.validMoves=e}return this.validMoves}},{key:"isValidMove",value:function(e,t){var r=this.getValidMoves(this.currPlayer),a=!0,n=!1,i=void 0;try{for(var o,s=r[Symbol.iterator]();!(a=(o=s.next()).done);a=!0){var l=o.value;if(l.rowIndex===e&&l.columnIndex===t)return!0}}catch(u){n=!0,i=u}finally{try{a||null==s.return||s.return()}finally{if(n)throw i}}return!1}},{key:"getMove",value:function(e,t){var r=this.getValidMoves(this.currPlayer),a=!0,n=!1,i=void 0;try{for(var o,s=r[Symbol.iterator]();!(a=(o=s.next()).done);a=!0){var l=o.value;if(l.rowIndex===e&&l.columnIndex===t)return l}}catch(u){n=!0,i=u}finally{try{a||null==s.return||s.return()}finally{if(n)throw i}}return!1}},{key:"getToReverse",value:function(e,t,r){for(var a=[],n=-1;n<=1;++n)for(var i=-1;i<=1;++i)0===n&&0===i||(a=a.concat(this.getToReverseInDirection(e,t,r,n,i)));return a}},{key:"getToReverseInDirection",value:function(e,t,r,a,n){for(var i=[],o=t,s=r;;){if(o+=a,s+=n,!this.isOnBoard(o,s))return[];var l=this.grid[o][s];if(l===y.empty)return[];if(l===e.piece)return i;i.push({rowIndex:o,columnIndex:s})}}},{key:"isOnBoard",value:function(e,t){return e>=0&&e<8&&t>=0&&t<8}}],[{key:"getDefaultInitBoard",value:function(){var t=new e;return t.grid[3][3]=y.black,t.grid[4][4]=y.black,t.grid[4][3]=y.white,t.grid[3][4]=y.white,t}}]),e}(),S=function(){function e(t){Object(s.a)(this,e),this.StablePieceEnum=Object.freeze({stable:{key:1,val:1},unstable:{key:2,val:0},oppStable:{key:3,val:-1}}),this.depth=t||4}return Object(l.a)(e,[{key:"nextMove",value:function(e){var t=this.negamax(e,this.depth).move;return console.log("playing move:"+t),t}},{key:"negamax",value:function(e,t){if(0===t||e.winner)return{val:this.evaluateBoard(e)};var r=e.getValidMoves(),a=-1e8,n=null,i=!0,o=!1,s=void 0;try{for(var l,u=r[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var c=l.value;e.makeMove(c);var v=this.negamax(e,t-1);if(!v);console.log("Evaluated move: "+v),v.val>a&&(a=v.val,n={val:v.val,move:c}),e.undoMove(c)}}catch(h){o=!0,s=h}finally{try{i||null==u.return||u.return()}finally{if(o)throw s}}if(null===n);return n}},{key:"evaluateBoard",value:function(e){var t=this.getCurrentMobility(e),r=this.getPotentialMobility(e),a=this.getStabilityBoard(e),n=this.getInternalStability(a),i=this.getEdgeStability(e,a);return this.evaluatePosition(e.getMoveNumber(),i,n,t,r)}},{key:"getCurrentMobility",value:function(e){for(var t=0,r=0,a=e.currPlayer,n=d(a),i=0;i<8;++i)for(var o=0;o<8;++o)if(e.get(i,o)===y.empty){for(var s=0,l=0,u=-1;u<=1;++u)for(var c=-1;c<=1;++c){var v=i+u,h=o+c;e.isOnBoard(v,h)&&(e.get(v,h)===n.piece?s+=e.getToReverseInDirection(a,v,h,u,c):e.get(v,h)===a.piece&&(l+=e.getToReverseInDirection(n,v,h,u,c)))}s>0&&l>0?(t++,r++):s>0?r+=2:l>0&&(t+=2)}return 10*(t-r)/(t+r+2)}},{key:"getPotentialMobility",value:function(e){for(var t=e.currPlayer,r=d(t),a=0,n=0,i=0,o=0,s=0,l=0,u=0;u<8;++u)for(var c=0;c<8;++c){var v=e.get(u,c);if(v===r)this.isFrontierStone(e,u,c)&&a++;else if(v===t)this.isFrontierStone(e,u,c)&&o++;else if(v===y.empty){for(var h=-1;h<=1;++h)for(var f=-1;f<=1;++f){var m=u+h,b=c+f;if(e.isOnBoard(m,b)){var p=e.get(m,b);p===r?i++:p===t&&l++}}i>0&&n++,l>0&&s++}}return 10*(a-o)/(a+o+2)+10*(n-s)/(n+s+2)+10*(i-l)/(i+l+2)}},{key:"isFrontierStone",value:function(e,t,r){for(var a=-1;a<=1;++a)for(var n=-1;n<=1;++n){var i=t+a,o=r+n;if(e.isOnBoard(i,o)&&e[i][o]===y.empty)return!0}return!1}},{key:"getStabilityBoard",value:function(e){for(var t=[],r=0;r<8;r++){for(var a=[],n=0;n<8;n++)a.push(this.StablePieceEnum.unstable);t.push(a)}return this.markStableCorners(e,t),this.markStableStonesFrom0_0Corner(e,t),this.markStableStonesFrom0_7Corner(e,t),this.markStableStonesFrom7_7Corner(e,t),this.markStableStonesFrom7_0Corner(e,t),t}},{key:"markStableCorners",value:function(e,t){var r=e.currPlayer,a=d(r);e.get(0,0)===r.piece?t[0][0]=this.StablePieceEnum.stable:e.get(0,0)===a.piece&&(t[0][0]=this.StablePieceEnum.oppStable),e.get(0,7)===r.piece?t[0][7]=this.StablePieceEnum.stable:e.get(0,7)===a.piece&&(t[0][7]=this.StablePieceEnum.oppStable),e.get(7,7)===r.piece?t[7][7]=this.StablePieceEnum.stable:e.get(7,7)===a.piece&&(t[7][7]=this.StablePieceEnum.oppStable),e.get(7,0)===r.piece?t[7][0]=this.StablePieceEnum.stable:e.get(7,0)===a.piece&&(t[7][0]=this.StablePieceEnum.oppStable)}},{key:"markStableStonesFrom0_0Corner",value:function(e,t){var r=e.currPlayer,a=d(r);e.get(0,0)===r.piece?this.markStableStonesFrom0_0CornerForChosenPlayer(e,r,this.StablePieceEnum.stable,t):e.get(0,0)===a.piece&&this.markStableStonesFrom0_0CornerForChosenPlayer(e,a,this.StablePieceEnum.oppStable,t)}},{key:"markStableStonesFrom0_0CornerForChosenPlayer",value:function(e,t,r,a){for(var n=0;n<8&&e.get(n,0)===t.piece;n++)a[n][0]=r;for(var i=0;i<8&&e.get(0,i)===t.piece;i++)a[0][i]=r;for(var o=1;o<7;++o)for(var s=1;s<7&&e.get(o,s)===t.piece;++s)a[o][s]!==r&&a[o][s-1]===r&&a[o-1][s-1]===r&&a[o-1][s]===r&&a[o-1][s+1]===r&&(a[o][s]=r)}},{key:"markStableStonesFrom0_7Corner",value:function(e,t){var r=e.currPlayer,a=d(r);e.get(0,7)===r.piece?this.markStableStonesFrom0_7CornerForChosenPlayer(e,r,this.StablePieceEnum.stable,t):e.get(0,7)===a.piece&&this.markStableStonesFrom0_7CornerForChosenPlayer(e,a,this.StablePieceEnum.oppStable,t)}},{key:"markStableStonesFrom0_7CornerForChosenPlayer",value:function(e,t,r,a){for(var n=0;n<8&&e.get(n,7)===t.piece;++n)a[n][7]=r;for(var i=7;i>=0&&e.get(0,i)===t.piece;--i)a[0][i]=r;for(var o=1;o<7;++o)for(var s=6;s>=1&&e.get(o,s)===t.piece;--s)a[o][s]!==r&&a[o][s+1]===r&&a[o-1][s+1]===r&&a[o-1][s]===r&&a[o-1][s-1]===r&&(a[o][s]=r)}},{key:"markStableStonesFrom7_7Corner",value:function(e,t){var r=e.currPlayer,a=d(r);e.get(7,7)===r.piece?this.markStableStonesFrom7_7CornerForChosenPlayer(e,r,this.StablePieceEnum.stable,t):e.get(7,7)===a.piece&&this.markStableStonesFrom7_7CornerForChosenPlayer(e,a,this.StablePieceEnum.oppStable,t)}},{key:"markStableStonesFrom7_7CornerForChosenPlayer",value:function(e,t,r,a){for(var n=7;n>=0&&e.get(n,7)===t.piece;--n)a[n][7]=r;for(var i=7;i>=0&&e.get(7,i)===t.piece;--i)a[7][i]=r;for(var o=6;o>=1;--o)for(var s=6;s>=1&&e.get(o,s)===t.piece;--s)a[o][s]!==r&&a[o][s+1]===r&&a[o+1][s+1]===r&&a[o+1][s]===r&&a[o+1][s-1]===r&&(a[o][s]=r)}},{key:"markStableStonesFrom7_0Corner",value:function(e,t){var r=e.currPlayer,a=d(r);e.get(7,0)===r.piece?this.markStableStonesFrom7_0CornerForChosenPlayer(e,r,this.StablePieceEnum.stable,t):e.get(7,0)===a.piece&&this.markStableStonesFrom7_0CornerForChosenPlayer(e,a,this.StablePieceEnum.oppStable,t)}},{key:"markStableStonesFrom7_0CornerForChosenPlayer",value:function(e,t,r,a){for(var n=7;n>=0&&e.get(n,0)===t.piece;--n)a[n][0]=r;for(var i=0;i<8&&e.get(7,i)===t.piece;++i)a[7][i]=r;for(var o=6;o>=1;--o)for(var s=1;s<7&&e.get(o,s)===t.piece;--s)a[o][s]!==r&&a[o][s-1]===r&&a[o+1][s-1]===r&&a[o+1][s]===r&&a[o+1][s+1]===r&&(a[o][s]=r)}},{key:"getInternalStability",value:function(e){for(var t=0,r=0;r<8;r++)for(var a=0;a<8;a++)t+=e[r][a].val;return 100*t}},{key:"getEdgeStability",value:function(e,t){return this.getCornersEvaluation(t)+this.getC_SquareEvaluation(e,t)+this.getA_SquareEvaluation(e,t)+this.getB_SquareEvaluation(e,t)}},{key:"getCornersEvaluation",value:function(e){return 700*(e[0][0].val+e[0][7].val+e[7][7].val+e[7][0].val)}},{key:"getA_SquareEvaluation",value:function(e,t){var r=0;return r+=this.evaluatePos(e,t,0,2,1e3,75,200),r+=this.evaluatePos(e,t,0,5,1e3,75,200),r+=this.evaluatePos(e,t,2,0,1e3,75,200),r+=this.evaluatePos(e,t,5,0,1e3,75,200),r+=this.evaluatePos(e,t,7,2,1e3,75,200),r+=this.evaluatePos(e,t,7,5,1e3,75,200),r+=this.evaluatePos(e,t,2,7,1e3,75,200),r+=this.evaluatePos(e,t,5,7,1e3,75,200)}},{key:"getB_SquareEvaluation",value:function(e,t){var r=0;return r+=this.evaluatePos(e,t,3,0,1e3,50,200),r+=this.evaluatePos(e,t,3,7,1e3,50,200),r+=this.evaluatePos(e,t,0,3,1e3,50,200),r+=this.evaluatePos(e,t,7,3,1e3,50,200),r+=this.evaluatePos(e,t,4,0,1e3,50,200),r+=this.evaluatePos(e,t,4,7,1e3,50,200),r+=this.evaluatePos(e,t,0,4,1e3,50,200),r+=this.evaluatePos(e,t,7,4,1e3,50,200)}},{key:"getC_SquareEvaluation",value:function(e,t){var r=0;return r+=this.evaluatePos(e,t,0,6,1200,-25,200),r+=this.evaluatePos(e,t,0,1,1200,-25,200),r+=this.evaluatePos(e,t,6,0,1200,-25,200),r+=this.evaluatePos(e,t,1,0,1200,-25,200),r+=this.evaluatePos(e,t,7,6,1200,-25,200),r+=this.evaluatePos(e,t,7,1,1200,-25,200),r+=this.evaluatePos(e,t,6,7,1200,-25,200),r+=this.evaluatePos(e,t,1,7,1200,-25,200)}},{key:"evaluatePos",value:function(e,t,r,a,n,i,o){var s=e.currPlayer,l=d(s),u=0;return e.get(r,a)===s.piece?this.isStableStone(t,r,a)?u+=n:this.isUnstableStone(e,r,a,s,l)?u+=i:u+=o:e.get(r,a)===l.piece&&(this.isStableStone(t,r,a)?u-=n:this.isUnstableStone(e,r,a,s,l)?u-=i:u-=o),u}},{key:"isStableStone",value:function(e,t,r){return e[t][r]===this.StablePieceEnum.stable||e[t][r]===this.StablePieceEnum.oppStable}},{key:"isUnstableStone",value:function(e,t,r,a,n){if(e.get(t,r)!==a.piece)return!1;if(0===t||7===t){for(var i=r;e.isOnBoard(t,i+1);)if((i+=1)===n.piece){for(i=r;e.isOnBoard(t,i-1);)if((i-=1)===y.empty)return!0}else if(i===y.empty)for(;e.isOnBoard(t,i-1);)if((i-=1)===n.piece)return!0}else if(7===r||0===r)for(var o=t;e.isOnBoard(t,o+1);)if((o+=1)===n){for(o=t;e.isOnBoard(t,o-1);)if((o-=1)===y.empty)return!0}else if(o===y.empty)for(;e.isOnBoard(t,o-1);)if((o-=1)===n)return!0;return!1}},{key:"evaluatePosition",value:function(e,t,r,a,n){return this.getEdgeStabilityApplicationCoefficient(e)*t+36*r+this.getCurrentMobilityApplicationCoefficient(e)*a+99*n}},{key:"getEdgeStabilityApplicationCoefficient",value:function(e){return 312+6*e}},{key:"getCurrentMobilityApplicationCoefficient",value:function(e){return e<=25?50+2*e:75+e}}]),e}(),k=function(e){function t(e,r){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(c.a)(t).call(this,e,r))).makeMove=function(e){var t=a.board.getMove(e.props.rowIndex,e.props.columnIndex);if(t){a.board.makeMove(t),e.setPiece(a.player.piece);var r=a.actualPlayer.nextMove(a.board);a.board.makeMove(r),a.getSquare(r).setPiece(d(a.player.piece)),a.updateBoard()}},a.onMouseEnterSquare=function(e){var t=e.state.move;if(t){var r=!0,n=!1,i=void 0;try{for(var o,s=t.toReverse[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var l=o.value;a.getSquare(l).setToReverse(!0)}}catch(u){n=!0,i=u}finally{try{r||null==s.return||s.return()}finally{if(n)throw i}}}},a.onMouseLeaveSquare=function(e){var t=e.state.move;if(t){var r=!0,n=!1,i=void 0;try{for(var o,s=t.toReverse[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var l=o.value;a.getSquare(l).setToReverse(!1)}}catch(u){n=!0,i=u}finally{try{r||null==s.return||s.return()}finally{if(n)throw i}}}},a.createRefs(),a.board=g.getDefaultInitBoard(),a.player=e.player,a.actualPlayer=new S,a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"createRefs",value:function(){for(var e=[],t=0;t<8;t++){for(var r=[],a=0;a<8;a++)r.push(n.a.createRef());e.push(r)}this.squares=e}},{key:"updateBoard",value:function(){for(var e=0;e<8;e++)for(var t=0;t<8;t++){var r=this.board.getMove(e,t),a=this.squares[e][t].current;a.setMove(r),a.setPiece(this.board.get(e,t)),a.setToReverse(!1)}}},{key:"getSquare",value:function(e){return this.squares[e.rowIndex][e.columnIndex].current}},{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"board"},this.board.grid.map((function(t,r){return n.a.createElement("div",{className:"boardRow"},t.map((function(t,a){var i=e.board.getMove(r,a);return n.a.createElement(b,{rowIndex:r,columnIndex:a,ref:e.squares[r][a],color:"green",piece:e.board.get(r,a),move:i,onClick:e.makeMove,onMouseEnter:e.onMouseEnterSquare,onMouseLeave:e.onMouseLeaveSquare})})))})))}}]),t}(n.a.Component),P=function(e){function t(e,r){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(c.a)(t).call(this,e,r))).state={inGame:!0,difficulty:1,height:0,width:0},a.updateWindowDimensions=a.updateWindowDimensions.bind(Object(v.a)(a)),a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"startNewGame",value:function(e){this.setState({inGame:!0,difficulty:e})}},{key:"componentDidMount",value:function(){this.updateWindowDimensions(),window.addEventListener("resize",this.updateWindowDimensions)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateWindowDimensions)}},{key:"updateWindowDimensions",value:function(){this.setState({width:.7*window.innerWidth,height:window.innerHeight})}},{key:"render",value:function(){return n.a.createElement("div",{className:"GameSpace",style:{width:this.state.width,height:this.state.height}},n.a.createElement(m,{ratio:1},this.state.inGame?n.a.createElement(k,{player:p.white}):n.a.createElement(f,{difficulty:1,startNewGame:this.startNewGame.bind(this)})))}}]),t}(n.a.Component),w=(r(21),function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"Stats"},n.a.createElement("p",null,"Stats"))}}]),t}(n.a.Component));var E=function(){return n.a.createElement("div",{className:"AppRow"},n.a.createElement(P,null),n.a.createElement(w,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement(E,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[9,1,2]]]);
//# sourceMappingURL=main.777d71a2.chunk.js.map