(this.webpackJsonpreversi=this.webpackJsonpreversi||[]).push([[0],[,,,,,,,,,function(e,t,n){e.exports=n(22)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(8),o=n.n(i),l=(n(14),n(1)),c=n(2),s=n(4),u=n(3),v=n(5),h=(n(15),n(6)),f=(n(16),n(17),Object.freeze({random:{name:"Random Player"},hungry:{name:"Hungry Player"},simple:{name:"Simple Player"},strong:{name:"Strong Player"}})),d=Object.freeze({empty:1,white:2,black:3}),m=Object.freeze({white:{piece:d.white,name:"White Player"},black:{piece:d.black,name:"Black Player"}}),y=function(e){function t(e,n){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e,n))).onDifficultyChange=function(e){var t=null;if("random"===e.target.value)t=f.random;else if("hungry"===e.target.value)t=f.hungry;else{if("simple"!==e.target.value)throw new Error("Unknown difficulty");t=f.simple}a.setState({selectedDifficulty:t})},a.onPlayerChange=function(e){var t=null;if("white"===e.target.value)t=m.white;else{if("black"!==e.target.value)throw new Error("Unknown color");t=m.black}a.setState({selectedPlayer:t})},a.onSubmit=function(e){e.preventDefault(),a.props.onStartNewGame(a.state.selectedDifficulty,a.state.selectedPlayer)},a.state={selectedDifficulty:a.props.difficulty,selectedPlayer:a.props.player},a}return Object(v.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"NewGame"},r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("div",{className:"FormSection"},r.a.createElement("input",{type:"radio",id:"random",name:"difficulty",value:"random",checked:this.state.selectedDifficulty===f.random,onChange:this.onDifficultyChange}),r.a.createElement("label",{htmlFor:"random"},"Random"),r.a.createElement("input",{type:"radio",id:"hungry",name:"difficulty",value:"hungry",checked:this.state.selectedDifficulty===f.hungry,onChange:this.onDifficultyChange}),r.a.createElement("label",{htmlFor:"hungry"},"Hungry"),r.a.createElement("input",{type:"radio",id:"simple",name:"difficulty",value:"simple",checked:this.state.selectedDifficulty===f.simple,onChange:this.onDifficultyChange}),r.a.createElement("label",{htmlFor:"simple"},"Simple")),r.a.createElement("div",{className:"FormSection"},r.a.createElement("input",{type:"radio",id:"white",name:"color",value:"white",checked:this.state.selectedPlayer===m.white,onChange:this.onPlayerChange}),r.a.createElement("label",{htmlFor:"white"},"White"),r.a.createElement("input",{type:"radio",id:"black",name:"color",value:"black",checked:this.state.selectedPlayer===m.black,onChange:this.onPlayerChange}),r.a.createElement("label",{htmlFor:"black"},"Black")),r.a.createElement("footer",null,r.a.createElement("input",{type:"submit",value:"Start Game"}))))}}]),t}(r.a.Component),p=(n(18),n(19),n(20),function(e){function t(e,n){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).call(this,e,n))}return Object(v.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=1/this.props.ratio*100;return r.a.createElement("div",{className:"AspectRatioContainer",style:{paddingBottom:e.toString()+"%"}},r.a.createElement("div",{className:"AspectRatioInner"},this.props.children))}}]),t}(r.a.Component)),b=function(e){function t(e,n){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e,n))).onClick=function(){a.props.onClick(Object(h.a)(a))},a.onMouseEnter=function(){a.props.onMouseEnter(Object(h.a)(a))},a.onMouseLeave=function(){a.props.onMouseLeave(Object(h.a)(a))},a.state={piece:a.props.piece,move:a.props.move,toReverse:!1},a}return Object(v.a)(t,e),Object(c.a)(t,[{key:"setPiece",value:function(e){this.setState({piece:e})}},{key:"setMove",value:function(e){this.setState({move:e})}},{key:"setToReverse",value:function(e){this.setState({toReverse:e})}},{key:"render",value:function(){var e;e=this.state.piece===d.white?this.getPiece("white"):this.state.piece===d.black?this.getPiece("black"):"";var t=this.state.move?"blue":this.props.color;return t=this.state.toReverse?"aqua":t,r.a.createElement("div",{className:"SquareContainer"},r.a.createElement(p,{ratio:1,children:r.a.createElement("div",{className:"Square",style:{backgroundColor:t},onClick:this.onClick,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},e)}))}},{key:"getPiece",value:function(e){return r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"Piece"},r.a.createElement("circle",{r:"50%",cx:"50%",cy:"50%",fill:e}))}}]),t}(r.a.Component);var g=function(e){return e===m.white?m.black:m.white},w=function(){function e(){Object(l.a)(this,e),this.grid=[];for(var t=0;t<8;t++){for(var n=[],a=0;a<8;a++)n.push(d.empty);this.grid.push(n)}this.validMoves=null,this.currPlayer=m.white,this.moveNumber=1,this.winner=null}return Object(c.a)(e,[{key:"get",value:function(e,t){return this.grid[e][t]}},{key:"set",value:function(e,t){this.grid[e.rowIndex][e.columnIndex]=t,this.validMoves=null}},{key:"getMoveNumber",value:function(){return this.moveNumber}},{key:"makeMove",value:function(e){if(!this.isValidMove(e.rowIndex,e.columnIndex))throw new Error("The intended move is invalid");this.set(e,this.currPlayer.piece);var t=!0,n=!1,a=void 0;try{for(var r,i=e.toReverse[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var o=r.value;this.set(o,this.currPlayer.piece)}}catch(l){n=!0,a=l}finally{try{t||null==i.return||i.return()}finally{if(n)throw a}}this.currPlayer=g(this.currPlayer),this.getValidMoves().length>0?this.moveNumber++:this.winner=this.findWinner()}},{key:"findWinner",value:function(){for(var e=this.currPlayer,t=g(e),n=0,a=0,r=0;r<8;r++)for(var i=0;i<8;i++){var o=this.get(r,i);o===e.piece?n++:o===t.piece&&a++}return n>a?e:t}},{key:"undoMove",value:function(e){this.set(e,d.empty);var t=!0,n=!1,a=void 0;try{for(var r,i=e.toReverse[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var o=r.value;this.set(o,this.currPlayer.piece)}}catch(l){n=!0,a=l}finally{try{t||null==i.return||i.return()}finally{if(n)throw a}}this.currPlayer=g(this.currPlayer),this.winner=null,this.moveNumber--}},{key:"getValidMoves",value:function(){if(null===this.validMoves){if(!this.currPlayer)return[];for(var e=[],t=0;t<8;++t)for(var n=0;n<8;++n)if(this.grid[t][n]===d.empty){var a=this.getToReverse(this.currPlayer,t,n);a.length>0&&e.push({rowIndex:t,columnIndex:n,toReverse:a})}this.validMoves=e}return this.validMoves}},{key:"isValidMove",value:function(e,t){var n=this.getValidMoves(this.currPlayer),a=!0,r=!1,i=void 0;try{for(var o,l=n[Symbol.iterator]();!(a=(o=l.next()).done);a=!0){var c=o.value;if(c.rowIndex===e&&c.columnIndex===t)return!0}}catch(s){r=!0,i=s}finally{try{a||null==l.return||l.return()}finally{if(r)throw i}}return!1}},{key:"getMove",value:function(e,t){var n=this.getValidMoves(this.currPlayer),a=!0,r=!1,i=void 0;try{for(var o,l=n[Symbol.iterator]();!(a=(o=l.next()).done);a=!0){var c=o.value;if(c.rowIndex===e&&c.columnIndex===t)return c}}catch(s){r=!0,i=s}finally{try{a||null==l.return||l.return()}finally{if(r)throw i}}return!1}},{key:"getToReverse",value:function(e,t,n){for(var a=[],r=-1;r<=1;++r)for(var i=-1;i<=1;++i)0===r&&0===i||(a=a.concat(this.getToReverseInDirection(e,t,n,r,i)));return a}},{key:"getToReverseInDirection",value:function(e,t,n,a,r){for(var i=[],o=t,l=n;;){if(o+=a,l+=r,!this.isOnBoard(o,l))return[];var c=this.grid[o][l];if(c===d.empty)return[];if(c===e.piece)return i;i.push({rowIndex:o,columnIndex:l})}}},{key:"isOnBoard",value:function(e,t){return e>=0&&e<8&&t>=0&&t<8}}],[{key:"getDefaultInitBoard",value:function(){var t=new e;return t.grid[3][3]=d.black,t.grid[4][4]=d.black,t.grid[4][3]=d.white,t.grid[3][4]=d.white,t}}]),e}(),k=function(){function e(t){Object(l.a)(this,e),this.depth=t||4}return Object(c.a)(e,[{key:"nextMove",value:function(e){return this.negamax(e,this.depth,-1e8,1e8).move}},{key:"negamax",value:function(e,t,n,a){if(0===t||e.winner)return{val:this.evaluateBoard(e)};var r=e.getValidMoves(),i=-1e5,o=null,l=!0,c=!1,s=void 0;try{for(var u,v=r[Symbol.iterator]();!(l=(u=v.next()).done);l=!0){var h=u.value;e.makeMove(h);var f=this.negamax(e,t-1,n,a);if(f.val>i&&(i=f.val,o={val:f.val,move:h}),o&&o.val>n&&(n=o.val),n>=a)break;e.undoMove(h)}}catch(d){c=!0,s=d}finally{try{l||null==v.return||v.return()}finally{if(c)throw s}}return o}},{key:"evaluateBoard",value:function(e){throw new Error("You have to implement this function")}}]),e}(),O=function(e){function t(e){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).call(this,e))}return Object(v.a)(t,e),Object(c.a)(t,[{key:"evaluateBoard",value:function(e){for(var t=0,n=0;n<8;n++)for(var a=0;a<8;a++)e.get(n,a)===e.currPlayer.piece&&t++;return t}}]),t}(k),j=function(){function e(){Object(l.a)(this,e)}return Object(c.a)(e,[{key:"nextMove",value:function(e){var t=e.getValidMoves();return t[Math.floor(Math.random()*t.length)]}}]),e}(),S=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).call(this,1))}return Object(v.a)(t,e),Object(c.a)(t,[{key:"evaluateBoard",value:function(e){for(var t=0,n=0;n<8;n++)for(var a=0;a<8;a++)e.get(n,a)===e.currPlayer.piece&&t++;return t}}]),t}(k),E=function(e){function t(e,n){var a;switch(Object(l.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e,n))).makeMove=function(e){var t=a.board.getMove(e.props.rowIndex,e.props.columnIndex);if(t){if(a.board.makeMove(t),a.board.winner)return void a.props.onGameOver({winner:a.board.winner});a.makeOpponentMove(),a.updateBoard()}},a.onMouseEnterSquare=function(e){var t=e.state.move;if(t){var n=!0,r=!1,i=void 0;try{for(var o,l=t.toReverse[Symbol.iterator]();!(n=(o=l.next()).done);n=!0){var c=o.value;a.getSquare(c).setToReverse(!0)}}catch(s){r=!0,i=s}finally{try{n||null==l.return||l.return()}finally{if(r)throw i}}}},a.onMouseLeaveSquare=function(e){var t=e.state.move;if(t){var n=!0,r=!1,i=void 0;try{for(var o,l=t.toReverse[Symbol.iterator]();!(n=(o=l.next()).done);n=!0){var c=o.value;a.getSquare(c).setToReverse(!1)}}catch(s){r=!0,i=s}finally{try{n||null==l.return||l.return()}finally{if(r)throw i}}}},a.createRefs(),a.board=w.getDefaultInitBoard(),a.player=e.player,a.props.difficulty){case f.random:a.opponent=new j;break;case f.hungry:a.opponent=new S;break;case f.simple:a.opponent=new O;break;default:throw new Error("Unknown opponent player")}return a.player!==m.white&&a.makeOpponentMove(),a}return Object(v.a)(t,e),Object(c.a)(t,[{key:"createRefs",value:function(){for(var e=[],t=0;t<8;t++){for(var n=[],a=0;a<8;a++)n.push(r.a.createRef());e.push(n)}this.squareRefs=e}},{key:"makeOpponentMove",value:function(){var e=this.opponent.nextMove(this.board);this.board.makeMove(e),this.board.winner&&this.props.onGameOver({winner:this.board.winner})}},{key:"updateBoard",value:function(){for(var e=0;e<8;e++)for(var t=0;t<8;t++){var n=this.board.getMove(e,t),a=this.squareRefs[e][t].current;a.setMove(n),a.setPiece(this.board.get(e,t)),a.setToReverse(!1),a.forceUpdate()}}},{key:"getSquare",value:function(e){return this.squareRefs[e.rowIndex][e.columnIndex].current}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"board"},this.board.grid.map((function(t,n){return r.a.createElement("div",{className:"boardRow"},t.map((function(t,a){var i=e.board.getMove(n,a);return r.a.createElement(b,{rowIndex:n,columnIndex:a,ref:e.squareRefs[n][a],color:"green",piece:e.board.get(n,a),move:i,onClick:e.makeMove,onMouseEnter:e.onMouseEnterSquare,onMouseLeave:e.onMouseLeaveSquare})})))})))}}]),t}(r.a.Component),M=function(e){function t(e,n){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e,n))).onGameOver=function(e){alert(e.winner.name+" won!!!"),a.updateLocalStorage(e),a.setState({inGame:!1})},a.onStartNewGame=function(e,t){a.setState({inGame:!0,difficulty:e,player:t})},a.state={inGame:!1,player:m.white,difficulty:f.hungry,height:0,width:0},a.updateWindowDimensions=a.updateWindowDimensions.bind(Object(h.a)(a)),a}return Object(v.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.updateWindowDimensions(),window.addEventListener("resize",this.updateWindowDimensions)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateWindowDimensions)}},{key:"updateWindowDimensions",value:function(){this.setState({width:.7*window.innerWidth,height:window.innerHeight})}},{key:"updateLocalStorage",value:function(e){var t=e.winner===this.state.player?1:0;localStorage.getItem("victories")||localStorage.setItem("victories",t.toString()),localStorage.setItem("victories",(Number(localStorage.getItem("victories"))+t).toString()),this.props.onStatsChanged()}},{key:"render",value:function(){return r.a.createElement("div",{className:"GameSpace",style:{width:this.state.width,height:this.state.height}},r.a.createElement(p,{ratio:1},this.state.inGame?r.a.createElement(E,{player:this.state.player,onGameOver:this.onGameOver,difficulty:this.state.difficulty}):r.a.createElement(y,{onStartNewGame:this.onStartNewGame,difficulty:this.state.difficulty,player:this.state.player})))}}]),t}(r.a.Component),P=(n(21),function(e){function t(e,n){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e,n))).state={victories:0},a}return Object(v.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.update()}},{key:"update",value:function(){var e=localStorage.getItem("victories");e||(e="0"),this.setState({victories:Number(e)})}},{key:"render",value:function(){return r.a.createElement("div",{className:"Stats"},r.a.createElement("p",null,"Stats"),r.a.createElement("p",null,"Won: ",this.state.victories))}}]),t}(r.a.Component)),x=function(e){function t(e,n){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e,n))).onStatsChanged=function(){a.statsRef.current.update()},a.statsRef=r.a.createRef(),a}return Object(v.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"AppRow"},r.a.createElement(M,{onStatsChanged:this.onStatsChanged}),r.a.createElement(P,{ref:this.statsRef}))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(x,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[9,1,2]]]);
//# sourceMappingURL=main.f992a4d8.chunk.js.map